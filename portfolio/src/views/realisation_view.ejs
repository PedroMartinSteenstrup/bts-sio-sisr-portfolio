<!doctype html>
<html>

<head>
    <title>The Main Realisations Page</title>
    <%- include('partials/head'); %>
</head>
<header>
    <%- include('partials/header'); %>
</header>
<body>
    <br>
    <h3>
        <%= realisation.r_intitule %>
    </h3>
    <p> </p>
    <p>
        Concepts clés: <%= realisation.r_description %>
    </p>

    <div class="container">
        <ul class="ordering">
            Compétences:
            <li><span></span>
                Mise en oeuvre
            </li>
            <li><span></span>
                Non mise en oeuvre
            </li>
        </ul>
        <% if (realisation.est_gestion_patrimoine) { %>
            <div class="truebox">
                <% } else { %>
                    <div class="falsebox">
                        <% } %>
                            <p>Gérer le patrimoine informatique</p>
                    </div>
                    <% if (realisation.est_response_incidents) { %>
                        <div class="truebox">
                            <% } else { %>
                                <div class="falsebox">
                                    <% } %>
                                        <p>Incidents, Assistance, Evolution</p>
                                </div>
    <% if (realisation.est_presence_en_ligne) { %>
        <div class="truebox">
            <% } else { %>
                <div class="falsebox">
                    <% } %>
                        <p>Présence en ligne</p>
                </div>
                <% if (realisation.est_travail_mode_projet) { %>
                    <div class="truebox">
                        <% } else { %>
                            <div class="falsebox">
                                <% } %>
                                    <p>Mode projet</p>
                            </div>
                            <% if (realisation.est_deploiement_service) { %>
                                <div class="truebox">
                                    <% } else { %>
                                        <div class="falsebox">
                                            <% } %>
                                                <p>Mettre à disposition</p>
                                        </div>
    <% if (realisation.est_developpement_pro) { %>
        <div class="truebox">
            <% } else { %>
                <div class="falsebox">
                    <% } %>
                        <p>Développement pro</p>
                </div>
        </div>
        <div class="container">
            <div class="content">
                <br>
                <% if (files && files.length > 0) { %>
                    <div class="carousel-container">
                        <div class="carousel">
                            <% files.forEach(file => { %>
                                <div class="carousel-item">
                                    <% if (file.media_path.endsWith('.jpg') || file.media_path.endsWith('.jpeg') || file.media_path.endsWith('.png') || file.media_path.endsWith('.gif')) { %>
                                        <!-- Image -->

                                            <img src="<%= file.url %>" alt="Image for Realisation <%= realisation.realisation_id %>">
                                    <% } else if (file.media_path.endsWith('.pdf')) { %>
                                        <!-- PDF -->
                                        <iframe src="<%= file.url %>" frameborder="0"></iframe>
                                    <% } else if (file.media_path.endsWith('.txt') || file.media_path.endsWith('.json')) { %>
                                        <!-- Text or JSON File -->
                                        <iframe src="<%= file.url %>" frameborder="0"></iframe>
                                    <% } else if (file.media_path.endsWith('.svg')) { %>
                                        <!-- SVG -->
                                            <embed src="<%= file.url %>" type="image/svg+xml">
                                    <% } else { %>
                            <p>Format de fichier non pris en charge: <%= file.media_path %></p>
                            <% } %>
                        </div>
                    <% }) %>
                </div>
            </div>
        <% } else { %>
            <p>Aucun fichier disponible pour cette réalisation.</p>
        <% } %>

<a href="/realisations"><button>Retour à la liste des réalisations</button></a>

<script nonce="<%= nonce %>"
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script nonce="<%= nonce %>"
    src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<script nonce="<%= nonce %>">
    $(document).ready(function () {
        $('.carousel').slick({
            infinite: true,
            slidesToShow: 1,
            slidesToScroll: 1,
            autoplay: true,
            autoplaySpeed: 3000,
        });
    });
</script>
<script nonce="<%= nonce %>">
    document.addEventListener('DOMContentLoaded', function() {
        const jsonElement = document.getElementById('json-data');
        if (jsonElement) {
        const jsonSrc = jsonElement.getAttribute('data-json-src');
        fetch(jsonSrc)
            .then(response => response.json())
            .then(data => {
                jsonElement.textContent = JSON.stringify(data, null, 2);
            })
            .catch(error => console.error('Error fetching JSON:', error));}
    });
</script>
<footer>
    <%- include('partials/footer'); %>
  </footer>
</body>
</html>